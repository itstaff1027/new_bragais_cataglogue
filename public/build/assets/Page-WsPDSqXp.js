import{a as D,r as d,j as e,h as u}from"./app-CJ7IyaXc.js";import{A as H}from"./AuthenticatedLayout-D76hoK-Z.js";import{I as n,T as g}from"./TextInput-Drehn-t1.js";import{I as m}from"./InputLabel-CXhsWdE1.js";import{C as $,S as L,H as R,a as k}from"./Categories-BQ43gojC.js";import{u as h}from"./Value-BkK3_QVx.js";import"./ApplicationLogo-_-crNB77.js";import"./Dropdown-ChdRGpL1.js";import"./transition-CvbSRbsn.js";const Q=({product:r,colors:y,sizes:N,heel_heights:_,categories:w})=>{const{data:t,setData:o,put:S,errors:i}=D({product_name:r.product_name||"",status:r.status||"",cost:r.cost||0,srp:r.srp||0,colors:r.colors||[],sizes:r.sizes||[],heel_heights:r.heel_heights||[],categories:r.categories||[],description:r.description||[],front_image:null,gallery_images:[]}),[p,I]=d.useState(r.front_image?`${h}${r.front_image}`:null),[x,C]=d.useState(r.gallery_images?r.gallery_images.map(s=>({id:s.id,path:`${h}${s.image_path}`})):[]),[f,j]=d.useState([]),E=s=>{const a=s.target.files[0];a&&(I(URL.createObjectURL(a)),o("front_image",a))},z=()=>{const s=new FormData;s.append("front_image",t.front_image),s.append("id",r.id),u.post("/inventory/product/front_image/upload",s,{onSuccess:()=>{alert("Front image updated successfully!")},onError:a=>{console.error("Error updating front image:",a)}})},G=s=>{const a=Array.from(s.target.files),l=a.map(c=>URL.createObjectURL(c)),v=a.map((c,b)=>({id:`new-${b}`,path:l[b],file:c}));j(c=>[...c,...v])},P=s=>{if(confirm("Are you sure you want to delete this image?")){const a=x[s];u.post("/inventory/product/gallery_image/delete",{id:a.id},{onSuccess:()=>{alert("Image removed successfully!"),C(l=>l.filter((v,c)=>c!==s))},onError:l=>{console.error("Error deleting image:",l)}})}},F=()=>{const s=new FormData;f.forEach(a=>s.append("gallery_images[]",a.file)),s.append("id",r.id),u.post("/inventory/product/gallery_images/upload",s,{onSuccess:a=>{alert("Gallery images updated successfully!"),j([])},onError:a=>{console.error("Error updating gallery images:",a)}})},U=s=>{s.preventDefault(),console.log(t),S(`/inventory/products/${r.id}`)};return d.useEffect(()=>{console.log(r),console.log(`${h}${r.front_image}`)},[]),e.jsx(H,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Edit Product"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-md rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Edit Product"}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"front_image",value:"Upload Front Image"}),e.jsx("input",{type:"file",id:"front_image",onChange:E,className:"block w-full text-sm text-gray-500 border rounded"}),p&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:p,alt:"Front Preview",className:"w-full h-32 object-cover rounded"})}),e.jsx("button",{type:"button",onClick:z,className:"bg-blue-500 text-white px-4 py-2 mt-2 rounded hover:bg-blue-600",children:"Save Front Image"}),e.jsx(n,{message:i.front_image})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"gallery_images",value:"Upload Gallery Images"}),e.jsx("input",{type:"file",id:"gallery_images",multiple:!0,onChange:G,className:"block w-full text-sm text-gray-500 border rounded"}),e.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[x.map((s,a)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.path,alt:"Gallery Preview",className:"w-full h-32 object-cover rounded"}),e.jsx("button",{type:"button",onClick:()=>P(a),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:"X"})]},s.id)),f.map((s,a)=>e.jsx("div",{className:"relative",children:e.jsx("img",{src:s.path,alt:"New Gallery Preview",className:"w-full h-32 object-cover rounded"})},s.id))]}),e.jsx("button",{type:"button",onClick:F,className:"bg-green-500 text-white px-4 py-2 mt-2 rounded hover:bg-green-600",children:"Save Gallery Images"}),e.jsx(n,{message:i.gallery_images})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"name",value:"Product Name"}),e.jsx(g,{type:"text",id:"name",name:"name",value:t.product_name,onChange:s=>o("product_name",s.target.value),className:"w-full border px-4 py-2"}),e.jsx(n,{message:i.product_name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"status",value:"Status"}),e.jsx(g,{type:"text",id:"status",name:"status",value:t.status,onChange:s=>o("status",s.target.value),className:"w-full border px-4 py-2"}),e.jsx(n,{message:i.status})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"cost",value:"Cost"}),e.jsx(g,{type:"number",id:"cost",name:"cost",value:t.cost,onChange:s=>o("cost",s.target.value),className:"w-full border px-4 py-2"}),e.jsx(n,{message:i.status})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"srp",value:"SRP"}),e.jsx(g,{type:"number",id:"srp",name:"srp",value:t.srp,onChange:s=>o("srp",s.target.value),className:"w-full border px-4 py-2"}),e.jsx(n,{message:i.srp})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"colors",value:"Colors"}),e.jsx($.Selection,{handleSelectedColor:(s,a=!1)=>{a?o("colors",t.colors.filter(l=>l.id!==s.id)):t.colors.some(l=>l.id===s.id)||o("colors",[...t.colors,s])},colors:t.colors,availableColors:y}),e.jsx(n,{message:i.colors})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"sizes",value:"Sizes"}),e.jsx(L.Selection,{handleSelectedSizes:(s,a=!1)=>{a?o("sizes",t.sizes.filter(l=>l.id!==s.id)):t.sizes.some(l=>l.id===s.id)||o("sizes",[...t.sizes,s])},sizes:t.sizes,availableSizes:N}),e.jsx(n,{message:i.sizes})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"heel_height",value:"Heel Heights"}),e.jsx(R.Selection,{handleSelectedHeelHeights:(s,a=!1)=>{a?o("heel_heights",t.heel_heights.filter(l=>l.id!==s.id)):t.heel_heights.some(l=>l.id===s.id)||o("heel_heights",[...t.heel_heights,s])},heelHeights:t.heel_heights,availableHeelHeights:_}),e.jsx(n,{message:i.HeelHeights})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"categories",value:"Category"}),e.jsx(k.Selection,{handleSelectedCategories:(s,a=!1)=>{a?o("categories",t.categories.filter(l=>l.id!==s.id)):t.categories.some(l=>l.id===s.id)||o("categories",[...t.categories,s])},categories:t.categories,availableCategories:w}),e.jsx(n,{message:i.categories})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{for:"description",value:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:s=>o("description",s.target.value),className:"w-full border px-4 py-2"}),e.jsx(n,{message:i.description})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Save Changes"})]})]})})})})})})};export{Q as default};
